# 多平台房价数据爬虫

这是一个用于爬取多个房产网站（安居客、58同城、贝壳找房、链家）的房价数据的Python程序，可以按照户型（几室几厅）和建筑年份进行筛选，并将结果保存到Excel表格中。

## 功能特点

- **多平台支持**：爬取主流房产网站（安居客、58同城、贝壳找房、链家）
- **多城市支持**：支持全国主要城市的房源数据爬取
- **多类型支持**：爬取新房、二手房和租房数据
- **筛选功能**：支持按照户型（几室几厅）和建筑年份筛选
- **自动验证**：内置自动处理验证码功能，减少人工干预
- **数据导出**：将结果保存为Excel表格，方便分析和处理

## 系统要求

- Python 3.6 或更高版本
- 必要的Python库（详见`setup.py`）
- Chrome浏览器和对应版本的ChromeDriver（用于自动验证功能）

## 快速开始

### 安装和配置

1. 克隆或下载本项目

2. 使用安装脚本进行依赖安装和环境配置
```bash
python setup.py
```
这个脚本会：
- 检查Python版本
- 安装所需的依赖库
- 检查Chrome浏览器和ChromeDriver
- 创建必要的目录
- 测试安装是否成功

### 运行爬虫

```bash
python multi_platform_housing_scraper.py
```

按照程序提示选择相应的选项：
1. 选择爬取的平台
2. 选择爬取的城市
3. 选择房源类型（新房/二手房/租房）
4. 设置筛选条件（户型、建筑年份等）
5. 设置爬取页数

## 验证码处理

本项目内置了自动处理验证码的功能，支持以下类型的验证处理：

1. **滑块验证**：通过模拟人类行为的轨迹算法自动拖动滑块
2. **点击验证**：自动尝试点击图片中可能的验证区域
3. **手动处理**：如果自动处理失败，会打开浏览器供用户手动验证

如果遇到验证码问题：
- 确保已安装Selenium和相关依赖
- 确保Chrome浏览器和ChromeDriver版本匹配
- 查看`verification_debug`目录中的截图，了解验证失败的原因
- 如果频繁遇到验证码，尝试减慢爬取速度或更换IP地址

## 数据存储

爬取的数据将保存在`housing_data`目录下的Excel文件中，文件名格式为：
`多平台房价数据_YYYYMMDD_HHMMSS.xlsx`

包含以下信息：
- 名称
- 价格
- 位置
- 户型
- 面积
- 建筑年份
- 房源类型
- 平台来源
- 爬取时间

## 排错指南

### 常见问题

1. **无法找到房源数据**
   - 检查选择器是否更新（网站可能更改了HTML结构）
   - 检查`debug_pages`目录中保存的页面文件

2. **验证码处理失败**
   - 检查`verification_debug`目录中的截图
   - 确认Chrome和ChromeDriver版本匹配
   - 尝试手动处理验证码

3. **程序崩溃或异常**
   - 查看`housing_scraper.log`日志文件
   - 检查依赖项是否正确安装

### 日志文件

项目会生成以下日志文件：
- `housing_scraper.log`：主爬虫日志
- `verification.log`：验证码处理日志

## 安全与合规

- 本项目仅供学习和研究使用，请勿用于商业目的
- 请遵守网站的robots.txt规则
- 建议设置合理的爬取间隔，避免给目标网站带来过大负担
- 爬取的数据请勿用于违法用途

## 许可证

本项目采用 MIT 许可证 - 详情见 [LICENSE](LICENSE) 文件 